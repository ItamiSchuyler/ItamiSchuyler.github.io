<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Escritorio Itami</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}

html,body{
margin:0;
width:100%;
height:100%;
overflow:hidden;
}

/* WALLPAPER */
#wallpaper{
position:fixed;
inset:0;
background-size:cover;
background-position:center;
z-index:-3;
}

/* PARTICLES */
#particles{
position:fixed;
inset:0;
z-index:-2;
pointer-events:none;
}

/* BLUR */
#blur-layer{
position:fixed;
inset:0;
backdrop-filter:blur(12px);
background:rgba(0,0,0,.25);
opacity:0;
transition:.3s;
z-index:-1;
pointer-events:none;
}
#blur-layer.active{opacity:1}

/* DESKTOP */
#desktop{position:relative;width:100%;height:100%;padding:20px}

/* FOLDERS */
.folder{
width:100px;
color:#EDEDED;
text-align:center;
position:absolute;
cursor:pointer;
user-select:none;
padding:10px;
border-radius:10px;
background:transparent;
border:1px solid transparent;
transition:.2s ease;
}
.folder:hover{transform:scale(1.04)}
.folder img{width:64px}
.folder span{font-size:13px;margin-top:4px;display:block}

/* WINDOWS */
.window{
position:absolute;
width:600px;
background:#1b1b1bdd;
color:#eee;
border-radius:12px;
box-shadow:0 20px 50px rgba(0,0,0,.7);
display:none;
animation:open .25s ease;
}
@keyframes open{
from{opacity:0;transform:scale(.95)}
to{opacity:1;transform:scale(1)}
}

.titlebar{
background:#000;
padding:10px;
display:flex;
justify-content:space-between;
cursor:grab;
}

.content{padding:0}

/* TASKBAR */
#taskbar{
position:fixed;
bottom:0;
width:100%;
height:50px;
background:rgba(10,10,10,.95);
display:flex;
align-items:center;
padding:0 15px;
gap:15px;
}

#notify{font-size:22px;cursor:pointer}
#clock{margin-left:auto;color:#fff;font-size:13px;text-align:right}

/* STATUS DOT */
.status-dot{
width:10px;
height:10px;
border-radius:50%;
display:inline-block;
margin-right:6px;
box-shadow:0 0 8px currentColor;
animation:pulseStatus 1.6s infinite;
}

.online{color:#00ff9c}
.away{color:#ffaa00}
.busy{color:#ff4444}

@keyframes pulseStatus{
50%{opacity:.4; transform:scale(.85)}
}

/* CHAT */
.chat-wrap{display:flex;height:360px}
.friends{width:200px;background:#111;padding:5px}
.friend{
padding:10px;
display:flex;
align-items:center;
gap:10px;
cursor:pointer;
border-radius:10px;
transition:.2s;
}
.friend:hover{background:#222}
.friend img{width:36px;height:36px;border-radius:50%}

.chat-box{flex:1;padding:12px;overflow:auto}

/* HEADER CHAT */
.chat-header{
height:90px;
display:flex;
align-items:center;
gap:12px;
padding:10px;
background-size:cover;
background-position:center;
border-bottom:1px solid rgba(255,255,255,.15);
color:white;
}

.chat-header img{
width:48px;
height:48px;
border-radius:50%;
border:2px solid white;
cursor:pointer;
}

/* MESSAGES */
.msg{
max-width:70%;
padding:8px 12px;
border-radius:12px;
margin-bottom:6px;
opacity:0;
transform:translateY(8px);
animation:msgAppear .35s forwards;
}

.msg.them{background:#333}
.msg.me{background:#0078ff;margin-left:auto}

@keyframes msgAppear{
to{opacity:1;transform:translateY(0)}
}

/* typing */
.typing{
width:60px;
padding:8px 12px;
border-radius:12px;
background:#333;
display:flex;
gap:4px;
}

.dot{
width:6px;
height:6px;
background:white;
border-radius:50%;
animation:blink 1.2s infinite;
}
.dot:nth-child(2){animation-delay:.2s}
.dot:nth-child(3){animation-delay:.4s}
@keyframes blink{
0%,100%{opacity:.2}
50%{opacity:1}
}

/* PROFILE POPUP */
.profile-popup{
position:absolute;
width:260px;
background:rgba(20,20,20,.95);
backdrop-filter:blur(12px);
border-radius:16px;
padding:15px;
box-shadow:0 20px 40px rgba(0,0,0,.7);
color:white;
display:none;
z-index:9999;
}

.profile-popup img{
width:90px;
height:90px;
border-radius:18px;
display:block;
margin:auto;
margin-bottom:10px;
}
</style>
</head>

<body>

<div id="wallpaper"></div>
<canvas id="particles"></canvas>
<div id="blur-layer"></div>

<div id="desktop">
<div class="folder" data-open="chatApp">
<img src="https://cdn-icons-png.flaticon.com/128/456/456793.png">
<div>Chat</div>
</div>
</div>

<div id="profilePopup" class="profile-popup"></div>

<!-- CHAT WINDOW -->
<div class="window" id="chatApp">
<div class="titlebar">Amigos <span onclick="closeWin('chatApp')">âœ•</span></div>

<div class="content">
<div class="chat-header" id="chatHeader"></div>

<div class="chat-wrap">
<div class="friends" id="friends"></div>
<div class="chat-box" id="chatBox"></div>
</div>
</div>
</div>

<div id="taskbar">
<div id="notify" onclick="openWin('chatApp')">ðŸ””</div>
<div id="clock"></div>
</div>

<script>
/* WALLPAPER */
document.getElementById("wallpaper").style.backgroundImage =
"url(https://i.ibb.co/S4wLCz9M/1399771.png)";

/* WINDOWS */
let z=10;
function openWin(id){
const w=document.getElementById(id);
w.style.display='block';
w.style.left=(window.innerWidth-w.offsetWidth)/2+"px";
w.style.top=(window.innerHeight-w.offsetHeight)/2+"px";
w.style.zIndex=++z;
document.getElementById("blur-layer").classList.add("active");
}

function closeWin(id){
document.getElementById(id).style.display='none';
document.getElementById("blur-layer").classList.remove("active");
}

/* CHAT DATA */
const chats = {
Chris:{
photo:"https://i.ibb.co/CKXkQQnS/dice2.png",
bg:"https://64.media.tumblr.com/286bdab6edbbe4b07b85ca48313573fa/d084846138f4cb8a-e4/s2048x3072_c200,0,99600,100000/f6ef2d85ee29d6a654fc1f11e8ac5286cc112e07.gif",
bio:"Gamer pro",
status:"online",
msgs:["Hola ðŸ‘‹","El space estÃ¡ en mantenimiento","No hago 3D pero hago UI bonita ðŸ˜¼"]
},
Taiga:{
photo:"https://i.ibb.co/Kzc35TgL/41-2.png",
bg:"https://i.pinimg.com/originals/30/f5/b4/30f5b4a2330bb25e08830e461846ac35.gif",
bio:"Mi mejor amiga <3",
status:"away",
msgs:["Eres cotilla ðŸ˜…"]
},
Cesar:{
photo:"https://i.ibb.co/Q7wWGYsP/kuro7.png",
bg:"https://66.media.tumblr.com/a96b0af62bf964e684620a333493c9a2/tumblr_inline_pr07k50MJD1wc6jir_540.gif",
bio:"El cesarr <3",
status:"busy",
msgs:["Deja de chismear ðŸ˜‘"]
}
};

const friends=document.getElementById('friends');
const chatBox=document.getElementById('chatBox');
const header=document.getElementById("chatHeader");

/* FRIEND LIST */
Object.keys(chats).forEach(name=>{
const f=document.createElement('div');
f.className='friend';
f.innerHTML=`<img src="${chats[name].photo}">${name}`;
f.onclick=()=>loadChat(name);
friends.appendChild(f);
});

/* LOAD CHAT */
function loadChat(name){

chatBox.innerHTML="";
const user=chats[name];

/* HEADER BG */
header.style.backgroundImage=`url(${user.bg})`;
header.innerHTML=`
<img src="${user.photo}" onclick="openProfile('${name}', event)">
<div>
<b>${name}</b><br>
<small><span class="status-dot ${user.status}"></span>${user.status.toUpperCase()}</small>
</div>
`;

let i=0;

function next(){
if(i>=user.msgs.length) return;

const typing=document.createElement('div');
typing.className='typing them';
typing.innerHTML='<div class="dot"></div><div class="dot"></div><div class="dot"></div>';
chatBox.appendChild(typing);
chatBox.scrollTop=chatBox.scrollHeight;

setTimeout(()=>{
typing.remove();

const msg=document.createElement('div');
msg.className='msg '+(i%2?'me':'them');
msg.textContent=user.msgs[i];
chatBox.appendChild(msg);
chatBox.scrollTop=chatBox.scrollHeight;

i++;
setTimeout(next,500);
},700);
}
next();
}

/* PROFILE POPUP */
function openProfile(name,e){
const p=chats[name];
const box=document.getElementById("profilePopup");

box.innerHTML=`
<img src="${p.photo}">
<h3 style="text-align:center">${name}</h3>
<p style="text-align:center;opacity:.8">${p.bio}</p>
<p style="text-align:center;font-size:13px;margin-top:6px">
Estado: ${p.status}
</p>
`;

box.style.display="block";
box.style.left=e.clientX+"px";
box.style.top=e.clientY+"px";
}

document.addEventListener("click",e=>{
if(!e.target.closest(".chat-header img"))
document.getElementById("profilePopup").style.display="none";
});

/* CLOCK */
function clock(){
const d=new Date();
document.getElementById('clock').innerHTML=
d.toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'})+
'<br>'+d.toLocaleDateString('es-ES');
}
clock();
setInterval(clock,1000);
</script>
</body>
</html>
