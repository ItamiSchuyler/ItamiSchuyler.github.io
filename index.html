<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Escritorio Itami</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}
html,body{margin:0;width:100%;height:100%;overflow:hidden;background:#000}

/* Fondo */
#video-bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-1;
}

/* Escritorio */
#desktop{position:relative;width:100%;height:100%;padding:20px}

/* Carpetas */
.folder{
  width:90px;
  color:#fff;
  text-align:center;
  position:absolute;
  cursor:pointer;
  user-select:none;
  border-radius:6px;
}
.folder.selected{background:rgba(255,255,255,.15)}
.folder img{width:64px}

/* Ventanas */
.window{
  position:absolute;
  width:480px;
  background:#1b1b1b;
  color:#eee;
  border-radius:12px;
  box-shadow:0 20px 50px rgba(0,0,0,.7);
  display:none;
}
.titlebar{
  background:#000;
  padding:10px;
  display:flex;
  justify-content:space-between;
  cursor:move;
}
.content{padding:15px}

/* Barra tareas */
#taskbar{
  position:fixed;
  bottom:0;left:0;
  width:100%;
  height:50px;
  background:rgba(10,10,10,.95);
  display:flex;
  align-items:center;
  padding:0 15px;
}
#clock{
  margin-left:auto;
  color:#fff;
  font-size:13px;
  text-align:right;
}

/* Player */
#player{
  position:fixed;
  right:20px;
  bottom:70px;
  width:300px;
  background:rgba(15,15,15,.95);
  border-radius:14px;
  padding:15px;
  color:#fff;
}
#controls{display:flex;align-items:center;gap:10px;margin-top:10px}
#play{font-size:22px;cursor:pointer}
#progress{flex:1;height:5px;background:#333;border-radius:4px}
#bar{height:100%;width:0;background:#fff}
.track{font-size:12px;cursor:pointer;opacity:.6}
.track.active{opacity:1}

/* Chat */
#chatApp{width:700px}
.chat-wrap{display:flex}
.friends{width:200px;background:#111}
.friend{padding:10px;cursor:pointer}
.friend:hover{background:#222}
.chat-box{flex:1;padding:10px}
.msg{margin-bottom:6px;padding:6px;border-radius:8px}
.them{background:#333}
.me{background:#0078ff;margin-left:auto}
</style>
</head>

<body>

<!-- VIDEO FONDO -->
<video id="video-bg" autoplay muted loop playsinline>
  <source src="fondoo.mp4" type="video/mp4">
</video>

<div id="desktop">
  <div class="folder" data-open="itami" style="top:20px;left:20px">
    <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
    <div>itami</div>
  </div>

  <div class="folder" data-open="trabajos" style="top:120px;left:20px">
    <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
    <div>mis trabajos</div>
  </div>

  <div class="folder" data-open="codigos" style="top:220px;left:20px">
    <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
    <div>cÃ³digos</div>
  </div>
</div>

<!-- Ventanas -->
<div class="window" id="itami">
  <div class="titlebar">Itami <span onclick="closeWin('itami')">âœ•</span></div>
  <div class="content">DiseÃ±ador & Programador</div>
</div>

<div class="window" id="trabajos">
  <div class="titlebar">Trabajos <span onclick="closeWin('trabajos')">âœ•</span></div>
  <div class="content">Portfolio</div>
</div>

<div class="window" id="codigos">
  <div class="titlebar">CÃ³digos <span onclick="closeWin('codigos')">âœ•</span></div>
  <div class="content">Repositorios</div>
</div>

<div class="window" id="chatApp">
  <div class="titlebar">Chats <span onclick="closeWin('chatApp')">âœ•</span></div>
  <div class="content chat-wrap">
    <div class="friends" id="friends"></div>
    <div class="chat-box" id="chatBox"></div>
  </div>
</div>

<div id="taskbar">
  <div onclick="openWin('chatApp')" style="cursor:pointer">ðŸ””</div>
  <div id="clock"></div>
</div>

<div id="player">
  <strong>Music Player</strong>
  <div id="controls">
    <div id="play">â–¶</div>
    <div id="progress"><div id="bar"></div></div>
  </div>
  <div id="playlist"></div>
</div>

<audio id="audio"></audio>

<script>
/* FORZAR VIDEO */
const bg=document.getElementById('video-bg');
bg.muted=true;
bg.play().catch(()=>{});

let z=10;

/* Ventanas */
function openWin(id){
  const w=document.getElementById(id);
  w.style.display='block';
  w.style.left='140px';
  w.style.top='90px';
  w.style.zIndex=++z;
}
function closeWin(id){document.getElementById(id).style.display='none';}

/* Carpetas */
document.querySelectorAll('.folder').forEach(f=>{
  f.ondblclick=()=>openWin(f.dataset.open);
});

/* Chat */
const chats={
  Chris:['Hola ðŸ‘‹','Firma'],
  Taiga:['Eres muy cotilla'],
  Cesar:['Spaces en mantenimiento']
};
const friends=document.getElementById('friends');
const chatBox=document.getElementById('chatBox');

Object.keys(chats).forEach(n=>{
  const d=document.createElement('div');
  d.className='friend';
  d.textContent=n;
  d.onclick=()=>loadChat(n);
  friends.appendChild(d);
});
function loadChat(n){
  chatBox.innerHTML='';
  chats[n].forEach((m,i)=>{
    const d=document.createElement('div');
    d.className='msg '+(i%2?'me':'them');
    d.textContent=m;
    chatBox.appendChild(d);
  });
}

/* Player */
const tracks=[
  {name:'Justin Bieber - Shes Confidence',src:'song.mp3'},
  {name:'Song Two',src:'cancion2.mp3'}
];
const audio=document.getElementById('audio');
const play=document.getElementById('play');
const bar=document.getElementById('bar');
const list=document.getElementById('playlist');
let current=0;

tracks.forEach((t,i)=>{
  const d=document.createElement('div');
  d.className='track';
  d.textContent=t.name;
  d.onclick=()=>load(i,true);
  list.appendChild(d);
});

function load(i,auto){
  current=i;
  audio.src=tracks[i].src;
  document.querySelectorAll('.track').forEach((t,j)=>t.classList.toggle('active',j===i));
  if(auto) audio.play().then(()=>play.textContent='â¸');
}

play.onclick=()=>{
  if(!audio.src) load(0,true);
  else audio.paused?audio.play().then(()=>play.textContent='â¸'):(audio.pause(),play.textContent='â–¶');
};

audio.ontimeupdate=()=>{
  if(audio.duration) bar.style.width=(audio.currentTime/audio.duration*100)+'%';
};

/* Permitir audio tras interacciÃ³n */
document.addEventListener('click',()=>audio.play().catch(()=>{}),{once:true});

/* Reloj */
function updateClock(){
  const n=new Date();
  document.getElementById('clock').innerHTML=
    n.toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'})+
    '<br>'+n.toLocaleDateString('es-ES');
}
updateClock();
setInterval(updateClock,1000);
</script>

</body>
</html>
