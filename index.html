<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Escritorio Itami</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}

html,body{
margin:0;
width:100%;
height:100%;
overflow:hidden;
}

/* WALLPAPER */
#wallpaper{
position:fixed;
inset:0;
background-size:cover;
background-position:center;
z-index:-3;
}

/* PARTICLES */
#particles{
position:fixed;
inset:0;
z-index:-2;
pointer-events:none;
}

/* BLUR */
#blur-layer{
position:fixed;
inset:0;
backdrop-filter:blur(12px);
background:rgba(0,0,0,.25);
opacity:0;
transition:.3s;
z-index:-1;
pointer-events:none;
}
#blur-layer.active{opacity:1}

/* DESKTOP */
#desktop{position:relative;width:100%;height:100%;padding:20px}

/* FOLDERS */
.folder{
width:90px;
color:#fff;
text-align:center;
position:absolute;
cursor:pointer;
user-select:none;
}
.folder img{width:64px}

/* WINDOWS */
.window{
position:absolute;
width:480px;
background:#1b1b1bdd;
color:#eee;
border-radius:12px;
box-shadow:0 20px 50px rgba(0,0,0,.7);
display:none;
animation:open .25s ease;
}
@keyframes open{
from{opacity:0;transform:scale(.95)}
to{opacity:1;transform:scale(1)}
}

.titlebar{
background:#000;
padding:10px;
display:flex;
justify-content:space-between;
cursor:grab;
}

.content{padding:15px}

.gallery{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:10px;
}
.item video,.item img{width:100%;border-radius:8px}

/* TASKBAR */
#taskbar{
position:fixed;
bottom:0;
width:100%;
height:50px;
background:rgba(10,10,10,.95);
display:flex;
align-items:center;
padding:0 15px;
gap:15px;
}

#notify{
font-size:22px;
cursor:pointer;
animation:pulse 1.5s infinite;
}
@keyframes pulse{
50%{opacity:.4}
}

#clock{
margin-left:auto;
color:#fff;
font-size:13px;
text-align:right;
}

/* PLAYER GLASS */
#player{
position:fixed;
right:20px;
bottom:70px;
width:300px;
background:rgba(25,25,25,.45);
backdrop-filter:blur(15px);
border-radius:16px;
padding:15px;
color:#fff;
box-shadow:0 10px 30px rgba(0,0,0,.5);
}

#controls{display:flex;gap:10px;margin-top:10px;align-items:center}

#play{
font-size:22px;
cursor:pointer;
padding:6px 10px;
border-radius:8px;
background:rgba(255,255,255,.1);
}

#progress{
flex:1;
height:6px;
background:rgba(255,255,255,.2);
border-radius:4px;
overflow:hidden;
}

#bar{
height:100%;
width:0;
background:white;
}

.track{
font-size:12px;
cursor:pointer;
opacity:.6;
margin-top:6px;
}
.track.active{opacity:1}
</style>
</head>

<body>

<div id="wallpaper"></div>
<canvas id="particles"></canvas>
<div id="blur-layer"></div>

<div id="desktop">

<div class="folder" data-open="itami" style="top:20px;left:20px">
<img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
<div>itami</div>
</div>

<div class="folder" data-open="trabajos" style="top:120px;left:20px">
<img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
<div>trabajos</div>
</div>

</div>

<!-- WINDOWS -->
<div class="window" id="itami">
<div class="titlebar">Itami <span onclick="closeWin('itami')">âœ•</span></div>
<div class="content gallery">
<img src="https://placekitten.com/400/250">
</div>
</div>

<div class="window" id="trabajos">
<div class="titlebar">Trabajos <span onclick="closeWin('trabajos')">âœ•</span></div>
<div class="content gallery">
<img src="https://placekitten.com/401/250">
</div>
</div>

<div id="taskbar">
<div id="notify" onclick="openWin('itami')">ðŸ””</div>
<div id="clock"></div>
</div>

<!-- PLAYER -->
<div id="player">
<div id="controls">
<div id="play">â–¶</div>
<div id="progress"><div id="bar"></div></div>
</div>
<div id="playlist"></div>
</div>

<audio id="audio"></audio>

<script>

/* WALLPAPER */
document.getElementById("wallpaper").style.backgroundImage=
"url(https://i.ibb.co/S4wLCz9M/1399771.png)";

/* PARTICLES */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");

let particles=[];
canvas.width=innerWidth;
canvas.height=innerHeight;

for(let i=0;i<80;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
vx:(Math.random()-0.5)*0.5,
vy:(Math.random()-0.5)*0.5
});
}

let mouse={x:0,y:0};
window.onmousemove=e=>{
mouse.x=e.clientX;
mouse.y=e.clientY;
};

function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);

particles.forEach(p=>{
let dx=p.x-mouse.x;
let dy=p.y-mouse.y;
let dist=Math.sqrt(dx*dx+dy*dy);

if(dist<120){
p.vx+=dx/2000;
p.vy+=dy/2000;
}

p.x+=p.vx;
p.y+=p.vy;

ctx.beginPath();
ctx.arc(p.x,p.y,2,0,Math.PI*2);
ctx.fillStyle="white";
ctx.fill();
});

requestAnimationFrame(animate);
}
animate();

/* WINDOWS OPEN/CLOSE */
let z=10;

function openWin(id){
const w=document.getElementById(id);
w.style.display='block';
w.style.left='150px';
w.style.top='90px';
w.style.zIndex=++z;
document.getElementById("blur-layer").classList.add("active");
}

function closeWin(id){
document.getElementById(id).style.display='none';

const abiertas=[...document.querySelectorAll(".window")]
.some(w=>w.style.display==="block");

if(!abiertas)
document.getElementById("blur-layer").classList.remove("active");
}

/* DRAG WINDOWS */
document.querySelectorAll(".window").forEach(win=>{
const bar=win.querySelector(".titlebar");

let drag=false,ox,oy;

bar.onmousedown=e=>{
drag=true;
ox=e.clientX-win.offsetLeft;
oy=e.clientY-win.offsetTop;
};

document.onmousemove=e=>{
if(!drag)return;
win.style.left=e.clientX-ox+"px";
win.style.top=e.clientY-oy+"px";
};

document.onmouseup=()=>drag=false;
});

/* DRAG FOLDERS */
document.querySelectorAll('.folder').forEach(folder=>{
let drag=false,ox,oy;

folder.onmousedown=e=>{
drag=true;
ox=e.clientX-folder.offsetLeft;
oy=e.clientY-folder.offsetTop;
};

document.onmousemove=e=>{
if(!drag)return;
folder.style.left=e.clientX-ox+'px';
folder.style.top=e.clientY-oy+'px';
};

document.onmouseup=()=>drag=false;

folder.ondblclick=()=>openWin(folder.dataset.open);
});

/* PLAYER */
const tracks=[
{name:'Confidence',src:'song.mp3'},
{name:'Yapi',src:'song2.mp3'}
];

const audio=document.getElementById('audio');
const play=document.getElementById('play');
const bar=document.getElementById('bar');
const list=document.getElementById('playlist');

let current=0;

function loadTrack(i){
current=i;
audio.src=tracks[i].src;

document.querySelectorAll('.track').forEach(x=>x.classList.remove('active'));
document.querySelectorAll('.track')[i].classList.add('active');
}

tracks.forEach((t,i)=>{
const d=document.createElement('div');
d.className='track';
d.textContent=t.name;
d.onclick=()=>{loadTrack(i);audio.play();play.textContent='â¸'};
list.appendChild(d);
});

loadTrack(0);

play.onclick=()=>{
audio.paused?(audio.play(),play.textContent='â¸'):(audio.pause(),play.textContent='â–¶');
};

audio.ontimeupdate=()=>{
if(audio.duration)
bar.style.width=(audio.currentTime/audio.duration*100)+'%';
};

/* CLOCK */
function clock(){
const d=new Date();
document.getElementById('clock').innerHTML=
d.toLocaleTimeString('es-ES',{hour:'2-digit',minute:'2-digit'})+
'<br>'+d.toLocaleDateString('es-ES');
}
clock();
setInterval(clock,1000);

</script>
</body>
</html>
